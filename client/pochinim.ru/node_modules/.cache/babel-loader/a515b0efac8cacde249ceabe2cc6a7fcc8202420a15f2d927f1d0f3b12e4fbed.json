{"ast":null,"code":"import{useState,useEffect}from'react';import Loader from'../../../Loader/Loader';import masterController from'../../../../controllers/MASTER-controller';import userController from'../../../../controllers/USER-controller';import InputWithError from'../../../../animations/input-error-field';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const MasterEmailEnter=_ref=>{let{email,setEmail,codeConf,setCodeConf,code,setCode,sendCode,setSendCode,step,setStep}=_ref;const[showLoader,setShowLoader]=useState(false);const[error,setError]=useState(false);const[warning,setWarning]=useState(false);const[errorMessage,setErrorMessage]=useState('Ошиюка');useEffect(()=>{try{if(email==''){throw Error('пустое значение');}else if(!email.includes('@')){setErrorMessage('Почта должа быть похожа на ******@email.com');throw Error('неверное значение');}}catch(error){if(error.message=='пустое значение'){setWarning(true);}else if(error.message=='неверное значение'){setError(true);}}},[email]);const sendNewCode=async()=>{if(email!=\"\"&&!(await masterController.checkMasterInBd(email))){setShowLoader(true);const b=await userController.getSendCode(email);setSendCode(b);setCodeConf(true);setShowLoader(false);}else{setError(true);setErrorMessage('Вы уже регестрировались поробуйте войти');}};const click=async()=>{if(email!=\"\"&&code==sendCode){setStep(step+1);}else{setError(true);setErrorMessage('Код введен не верный');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"phases-wrapper\",children:[/*#__PURE__*/_jsx(InputWithError,{placeholder:'почта',value:email,setValue:setEmail,error:error,setError:setError,errorText:errorMessage,warning:warning,setWarning:setWarning,warningText:'Заполните поле',inputType:\"email\"}),codeConf?/*#__PURE__*/_jsx(InputWithError,{placeholder:'код',value:code,setValue:setCode,error:error,setError:setError,errorText:errorMessage,warning:warning,setWarning:setWarning,warningText:'Заполните поле',inputType:\"number\"}):/*#__PURE__*/_jsx(\"button\",{onClick:sendNewCode,className:\"send-code-button\",children:\"\\u0432\\u044B\\u0441\\u043B\\u0430\\u0442\\u044C \\u043A\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{onClick:click,className:\"continue-button\",children:\"\\u041F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Loader,{showLoader:showLoader,setShowLoader:setShowLoader,text:\"Высылаем код\"})]});};export default MasterEmailEnter;","map":{"version":3,"names":["useState","useEffect","Loader","masterController","userController","InputWithError","jsx","_jsx","jsxs","_jsxs","MasterEmailEnter","_ref","email","setEmail","codeConf","setCodeConf","code","setCode","sendCode","setSendCode","step","setStep","showLoader","setShowLoader","error","setError","warning","setWarning","errorMessage","setErrorMessage","Error","includes","message","sendNewCode","checkMasterInBd","b","getSendCode","click","className","children","placeholder","value","setValue","errorText","warningText","inputType","onClick","text"],"sources":["C:/Users/denis/VSCode_projects/Pochinim.ru/client/pochinim.ru/src/components/Pages/SignInUpAsMaster/phases/EmailEnter.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport Loader from '../../../Loader/Loader';\r\nimport masterController from '../../../../controllers/MASTER-controller';\r\nimport userController from '../../../../controllers/USER-controller';\r\nimport InputWithError from '../../../../animations/input-error-field';\r\n\r\nconst MasterEmailEnter = ({email, setEmail, codeConf, setCodeConf, code, setCode, sendCode, setSendCode, step, setStep}) => {\r\n\r\n    const [showLoader, setShowLoader] = useState(false);\r\n\r\n    const [error, setError] = useState(false);\r\n    const [warning, setWarning] = useState(false);\r\n    const [errorMessage, setErrorMessage] = useState('Ошиюка');\r\n\r\n    useEffect(() => {\r\n        try {\r\n            if(email == ''){\r\n                throw Error('пустое значение')\r\n            }else if(!email.includes('@')){\r\n                setErrorMessage('Почта должа быть похожа на ******@email.com');\r\n                throw Error('неверное значение')\r\n            }\r\n        } catch (error) {\r\n            if(error.message == 'пустое значение'){\r\n                setWarning(true);\r\n            }else if(error.message == 'неверное значение'){\r\n                setError(true);\r\n            }\r\n        }\r\n    },[email])\r\n\r\n    const sendNewCode = async () => {\r\n        if(email != \"\" && !(await masterController.checkMasterInBd(email))){\r\n            setShowLoader(true);\r\n            const b = await userController.getSendCode(email);\r\n            setSendCode(b);\r\n            setCodeConf(true);\r\n\r\n            setShowLoader(false);\r\n        }else{\r\n            setError(true);\r\n            setErrorMessage('Вы уже регестрировались поробуйте войти');\r\n        }\r\n    }\r\n\r\n    const click = async () =>{\r\n        if(email != \"\" && code == sendCode){\r\n            setStep(step + 1);\r\n        }else{\r\n            setError(true);\r\n            setErrorMessage('Код введен не верный');\r\n        }\r\n    }\r\n\r\n    return(<div className=\"phases-wrapper\">\r\n        <InputWithError placeholder={'почта'} value={email} setValue={setEmail} \r\n            error={error} setError={setError} errorText={errorMessage}\r\n            warning={warning} setWarning={setWarning} warningText={'Заполните поле'}\r\n            inputType='email'></InputWithError>\r\n        {codeConf?\r\n        <InputWithError placeholder={'код'} value={code} setValue={setCode} \r\n            error={error} setError={setError} errorText={errorMessage}\r\n            warning={warning} setWarning={setWarning} warningText={'Заполните поле'}\r\n            inputType='number'></InputWithError>\r\n        :\r\n        <button onClick={sendNewCode} className=\"send-code-button\">выслать код</button>}\r\n        <button onClick={click} className='continue-button'>Продолжить</button>\r\n        <Loader showLoader={showLoader} setShowLoader={setShowLoader} text={\"Высылаем код\"}></Loader>\r\n    </div>);\r\n};\r\n\r\nexport default MasterEmailEnter;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}