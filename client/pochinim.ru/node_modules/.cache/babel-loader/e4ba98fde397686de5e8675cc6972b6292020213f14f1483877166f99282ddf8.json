{"ast":null,"code":"import{Fragment,useContext,useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import'./Chats.css';import{contextChats}from\"../../../contexts/contextChats\";import DotsImg from'../../../img/3-bots-img.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Chats=()=>{const params=useParams();const CHATS=useContext(contextChats);const[messages,setMessages]=useState(CHATS.messages);const[message,setMessage]=useState('');useEffect(()=>{async function getData(){await CHATS.downloadMessagesOfChat();setMessages(CHATS.messages);};getData();},[messages]);const enter=async()=>{CHATS.sendMessage(message);setMessage('');};return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"opened-chat\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-head\",children:[/*#__PURE__*/_jsx(\"div\",{children:CHATS.idCompanion}),/*#__PURE__*/_jsx(\"img\",{src:DotsImg,alt:\"\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-messages\",children:messages===null||messages===void 0?void 0:messages.map((val,ind)=>{if((val===null||val===void 0?void 0:val.sender_email)==params.email){var _val$message$split;return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'end'},children:/*#__PURE__*/_jsx(\"div\",{className:\"chat-my-message\",children:val===null||val===void 0?void 0:(_val$message$split=val.message.split(' '))===null||_val$message$split===void 0?void 0:_val$message$split.map((v,i)=>{return/*#__PURE__*/_jsx(\"p\",{children:v});})})},ind);}else{var _val$message$split2;return/*#__PURE__*/_jsx(\"div\",{className:\"chat-companion-message\",children:val===null||val===void 0?void 0:(_val$message$split2=val.message.split(' '))===null||_val$message$split2===void 0?void 0:_val$message$split2.map((v,i)=>{return/*#__PURE__*/_jsx(\"p\",{children:v});})},ind);}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-input\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"text-input-field\",value:message,placeholder:\"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",onChange:e=>setMessage(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"button-grey\",onClick:()=>enter(),children:\"\\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\"})]})]})});};export default Chats;","map":{"version":3,"names":["Fragment","useContext","useEffect","useState","useParams","contextChats","DotsImg","jsx","_jsx","jsxs","_jsxs","Chats","params","CHATS","messages","setMessages","message","setMessage","getData","downloadMessagesOfChat","enter","sendMessage","children","className","idCompanion","src","alt","map","val","ind","sender_email","email","_val$message$split","style","display","justifyContent","split","v","i","_val$message$split2","value","placeholder","onChange","e","target","onClick"],"sources":["C:/Users/denis/VSCode_projects/Pochinim.ru/client/pochinim.ru/src/components/Pages/Chats/Chat.js"],"sourcesContent":["import { Fragment, useContext, useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport './Chats.css';\r\nimport { contextChats } from \"../../../contexts/contextChats\";\r\nimport DotsImg from '../../../img/3-bots-img.png';\r\n\r\nconst Chats = () => {\r\n\r\n    const params = useParams();\r\n\r\n    const CHATS = useContext(contextChats);\r\n    const [messages, setMessages] = useState(CHATS.messages);\r\n    const [message, setMessage] = useState('');\r\n\r\n    useEffect(() => {\r\n        async function getData(){\r\n            await CHATS.downloadMessagesOfChat();\r\n            setMessages(CHATS.messages);\r\n        };\r\n        \r\n        getData();\r\n    }, [messages]);\r\n\r\n    const enter = async () => {\r\n        CHATS.sendMessage(message);\r\n        setMessage('');\r\n    }\r\n\r\n    return(<Fragment>\r\n                <div className=\"opened-chat\">\r\n                    <div className=\"chat-head\">\r\n                        <div>\r\n                            {CHATS.idCompanion}\r\n                        </div>\r\n                        <img src={DotsImg} alt=\"\"></img>\r\n                    </div>\r\n                    <div className=\"chat-messages\">\r\n                        {messages?.map((val, ind) => {\r\n                            if(val?.sender_email == params.email){\r\n                                return(<div key={ind} style={{display: 'flex', justifyContent: 'end'}}>\r\n                                    <div className=\"chat-my-message\">\r\n                                        {val?.message.split(' ')?.map((v, i) => {\r\n                                            return(<p>{v}</p>);\r\n                                        })}\r\n                                        {/*<p>{val?.date}</p>*/}\r\n                                    </div>\r\n                                </div>);\r\n                            }else{\r\n                                return(<div key={ind} className=\"chat-companion-message\">\r\n                                        {val?.message.split(' ')?.map((v, i) => {\r\n                                            return(<p>{v}</p>);\r\n                                        })}\r\n                                        {/*<p>{val?.date}</p>*/}\r\n                                    </div>);\r\n                            }\r\n                        })}\r\n                    </div>\r\n                    <div className=\"chat-input\">\r\n                        <input className=\"text-input-field\" value={message} placeholder=\"Сообщение\" onChange={e => setMessage(e.target.value)}></input>\r\n                        <button className=\"button-grey\" onClick={() => enter()}>отправить</button>\r\n                    </div>\r\n                </div>\r\n    </Fragment>);\r\n}\r\n\r\nexport default Chats;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}