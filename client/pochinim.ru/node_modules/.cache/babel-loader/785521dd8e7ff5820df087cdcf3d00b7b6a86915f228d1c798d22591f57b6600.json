{"ast":null,"code":"class TopicServices{async createNewTopic(_ref){let{topic,FIO,phoneNumber,need,problem,problemLocation,address,date,paymentOption,detailsText,detailsFiles,mail}=_ref;try{const body={\"topicName\":topic,\"fio\":FIO,\"phoneNumber\":phoneNumber,\"need\":need,\"problem\":problem,\"problemLocation\":problemLocation,\"address\":address,\"date\":date,\"payment\":paymentOption,\"detailsTxt\":detailsText,\"mail\":mail};const dataTopic=await fetch(\"http://localhost:4000/api/createTopic\",{credentials:\"include\",method:\"POST\",headers:{\"Accept\":\"application/json\",\"Content-Type\":\"application/json\",\"Authorization\":\"Bearer \".concat(localStorage.getItem('token'))},body:JSON.stringify(body)});const bot=await dataTopic.json();return bot===null||bot===void 0?void 0:bot.id_topic;}catch(error){console.log(\"Error in createNewTopic:\",error);}}async addFilesToTopic(id_topic,detailsFiles){try{if(id_topic){const file=new FormData();file.append('photo',detailsFiles);console.log(\"FormData():\",file);const dataFile=await fetch(\"http://localhost:4000/api/saveFileForTopic/\".concat(id_topic),{method:\"POST\",body:file});}}catch(error){console.log(\"Error in addFilesToTopic:\",error);}}}export default new TopicServices();","map":{"version":3,"names":["TopicServices","createNewTopic","_ref","topic","FIO","phoneNumber","need","problem","problemLocation","address","date","paymentOption","detailsText","detailsFiles","mail","body","dataTopic","fetch","credentials","method","headers","concat","localStorage","getItem","JSON","stringify","bot","json","id_topic","error","console","log","addFilesToTopic","file","FormData","append","dataFile"],"sources":["C:/Users/denis/VSCode_projects/Pochinim.ru/client/pochinim.ru/src/services/topic-services.js"],"sourcesContent":["class TopicServices{\r\n    async createNewTopic({topic, FIO, phoneNumber, need, problem, problemLocation,\r\n        address, date, paymentOption, detailsText, detailsFiles, mail}){\r\n        try {\r\n            \r\n            const body = {\"topicName\": topic, \"fio\": FIO, \"phoneNumber\": phoneNumber,\r\n                            \"need\": need, \"problem\": problem, \"problemLocation\": problemLocation,\r\n                            \"address\": address, \"date\": date, \"payment\":paymentOption, \r\n                            \"detailsTxt\": detailsText, \"mail\": mail};\r\n\r\n            const dataTopic = await fetch(\"http://localhost:4000/api/createTopic\", {\r\n                credentials: \"include\",\r\n                method: \"POST\", \r\n                headers : {\r\n                    \"Accept\": \"application/json\",\r\n                    \"Content-Type\": \"application/json\",\r\n                    \"Authorization\": `Bearer ${localStorage.getItem('token')}`\r\n                },\r\n                body: JSON.stringify(body)\r\n            })\r\n\r\n            const bot = await dataTopic.json();\r\n\r\n            return bot?.id_topic;\r\n        } catch (error) {\r\n            console.log(\"Error in createNewTopic:\", error);\r\n        }\r\n    }\r\n\r\n    async addFilesToTopic(id_topic, detailsFiles){\r\n        try {\r\n            if(id_topic){\r\n                const file = new FormData();\r\n                file.append('photo', detailsFiles);\r\n    \r\n                console.log(\"FormData():\", file);\r\n    \r\n                const dataFile = await fetch(`http://localhost:4000/api/saveFileForTopic/${id_topic}`, {\r\n                method: \"POST\",\r\n                body: file\r\n                })\r\n            }\r\n        } catch (error) {\r\n            console.log(\"Error in addFilesToTopic:\", error);\r\n        }\r\n    }\r\n}\r\n\r\nexport default new TopicServices();"],"mappings":"AAAA,KAAM,CAAAA,aAAa,CACf,KAAM,CAAAC,cAAcA,CAAAC,IAAA,CAC+C,IAD9C,CAACC,KAAK,CAAEC,GAAG,CAAEC,WAAW,CAAEC,IAAI,CAAEC,OAAO,CAAEC,eAAe,CACzEC,OAAO,CAAEC,IAAI,CAAEC,aAAa,CAAEC,WAAW,CAAEC,YAAY,CAAEC,IAAI,CAAC,CAAAZ,IAAA,CAC9D,GAAI,CAEA,KAAM,CAAAa,IAAI,CAAG,CAAC,WAAW,CAAEZ,KAAK,CAAE,KAAK,CAAEC,GAAG,CAAE,aAAa,CAAEC,WAAW,CACxD,MAAM,CAAEC,IAAI,CAAE,SAAS,CAAEC,OAAO,CAAE,iBAAiB,CAAEC,eAAe,CACpE,SAAS,CAAEC,OAAO,CAAE,MAAM,CAAEC,IAAI,CAAE,SAAS,CAACC,aAAa,CACzD,YAAY,CAAEC,WAAW,CAAE,MAAM,CAAEE,IAAI,CAAC,CAExD,KAAM,CAAAE,SAAS,CAAG,KAAM,CAAAC,KAAK,CAAC,uCAAuC,CAAE,CACnEC,WAAW,CAAE,SAAS,CACtBC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAG,CACN,QAAQ,CAAE,kBAAkB,CAC5B,cAAc,CAAE,kBAAkB,CAClC,eAAe,WAAAC,MAAA,CAAYC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC5D,CAAC,CACDR,IAAI,CAAES,IAAI,CAACC,SAAS,CAACV,IAAI,CAC7B,CAAC,CAAC,CAEF,KAAM,CAAAW,GAAG,CAAG,KAAM,CAAAV,SAAS,CAACW,IAAI,CAAC,CAAC,CAElC,MAAO,CAAAD,GAAG,SAAHA,GAAG,iBAAHA,GAAG,CAAEE,QAAQ,CACxB,CAAE,MAAOC,KAAK,CAAE,CACZC,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAEF,KAAK,CAAC,CAClD,CACJ,CAEA,KAAM,CAAAG,eAAeA,CAACJ,QAAQ,CAAEf,YAAY,CAAC,CACzC,GAAI,CACA,GAAGe,QAAQ,CAAC,CACR,KAAM,CAAAK,IAAI,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC3BD,IAAI,CAACE,MAAM,CAAC,OAAO,CAAEtB,YAAY,CAAC,CAElCiB,OAAO,CAACC,GAAG,CAAC,aAAa,CAAEE,IAAI,CAAC,CAEhC,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAnB,KAAK,+CAAAI,MAAA,CAA+CO,QAAQ,EAAI,CACvFT,MAAM,CAAE,MAAM,CACdJ,IAAI,CAAEkB,IACN,CAAC,CAAC,CACN,CACJ,CAAE,MAAOJ,KAAK,CAAE,CACZC,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAEF,KAAK,CAAC,CACnD,CACJ,CACJ,CAEA,cAAe,IAAI,CAAA7B,aAAa,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}