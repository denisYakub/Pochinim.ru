{"ast":null,"code":"const jwt = require('jsonwebtoken');\nclass Tokens {\n  generateToken(payload) {\n    const accessToken = jwt.sign(payload, process.env.JWT_ACCESS_SECRET, {\n      expiresIn: '30m'\n    });\n    const refreshToken = jwt.sign(payload, process.env.JWT_REFRESH_SECRET, {\n      expiresIn: '30d'\n    });\n    return {\n      accessToken,\n      refreshToken\n    };\n  }\n  async saveToken(account_id, refreshToken) {\n    const body = {\n      \"account_token\": refreshToken,\n      \"account_id\": account_id\n    };\n    const response1 = await fetch(\"http://localhost:4000/saveToken\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(body)\n    });\n    console.log(response1);\n    if (response1 === \"ERROR: account with this token have been created!\") {\n      const response2 = await fetch(\"http://localhost:4000/updateToken\", {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(body)\n      });\n      console.log(response2);\n    }\n    return refreshToken;\n  }\n}\nmodule.exports = new Tokens();","map":{"version":3,"names":["jwt","require","Tokens","generateToken","payload","accessToken","sign","process","env","JWT_ACCESS_SECRET","expiresIn","refreshToken","JWT_REFRESH_SECRET","saveToken","account_id","body","response1","fetch","method","headers","JSON","stringify","console","log","response2","module","exports"],"sources":["C:/Users/denis/VSCode_projects/Pochinim.ru/client/pochinim.ru/src/components/SignInUp/tokens.js"],"sourcesContent":["const jwt = require('jsonwebtoken');\r\n\r\nclass Tokens {\r\n    generateToken(payload){\r\n        const accessToken = jwt.sign(payload, process.env.JWT_ACCESS_SECRET, {expiresIn: '30m'})\r\n        const refreshToken = jwt.sign(payload, process.env.JWT_REFRESH_SECRET, {expiresIn: '30d'})\r\n        return {\r\n            accessToken,\r\n            refreshToken\r\n        };\r\n    }\r\n\r\n    async saveToken(account_id, refreshToken){\r\n\r\n        const body = {\"account_token\": refreshToken, \"account_id\": account_id};\r\n\r\n            const response1 = await fetch(\"http://localhost:4000/saveToken\",{\r\n                method: \"POST\",\r\n                headers: {\"Content-Type\": \"application/json\"},\r\n                body: JSON.stringify(body)\r\n            });\r\n\r\n            console.log(response1);\r\n\r\n            if(response1 === \"ERROR: account with this token have been created!\")\r\n            {\r\n                const response2 = await fetch(\"http://localhost:4000/updateToken\",{\r\n                    method: \"PUT\",\r\n                    headers: {\"Content-Type\": \"application/json\"},\r\n                    body: JSON.stringify(body)\r\n                });\r\n                console.log(response2);\r\n            }\r\n\r\n            return refreshToken;\r\n    }\r\n}\r\n\r\nmodule.exports = new Tokens();"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,cAAc,CAAC;AAEnC,MAAMC,MAAM,CAAC;EACTC,aAAaA,CAACC,OAAO,EAAC;IAClB,MAAMC,WAAW,GAAGL,GAAG,CAACM,IAAI,CAACF,OAAO,EAAEG,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAE;MAACC,SAAS,EAAE;IAAK,CAAC,CAAC;IACxF,MAAMC,YAAY,GAAGX,GAAG,CAACM,IAAI,CAACF,OAAO,EAAEG,OAAO,CAACC,GAAG,CAACI,kBAAkB,EAAE;MAACF,SAAS,EAAE;IAAK,CAAC,CAAC;IAC1F,OAAO;MACHL,WAAW;MACXM;IACJ,CAAC;EACL;EAEA,MAAME,SAASA,CAACC,UAAU,EAAEH,YAAY,EAAC;IAErC,MAAMI,IAAI,GAAG;MAAC,eAAe,EAAEJ,YAAY;MAAE,YAAY,EAAEG;IAAU,CAAC;IAElE,MAAME,SAAS,GAAG,MAAMC,KAAK,CAAC,iCAAiC,EAAC;MAC5DC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QAAC,cAAc,EAAE;MAAkB,CAAC;MAC7CJ,IAAI,EAAEK,IAAI,CAACC,SAAS,CAACN,IAAI;IAC7B,CAAC,CAAC;IAEFO,OAAO,CAACC,GAAG,CAACP,SAAS,CAAC;IAEtB,IAAGA,SAAS,KAAK,mDAAmD,EACpE;MACI,MAAMQ,SAAS,GAAG,MAAMP,KAAK,CAAC,mCAAmC,EAAC;QAC9DC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UAAC,cAAc,EAAE;QAAkB,CAAC;QAC7CJ,IAAI,EAAEK,IAAI,CAACC,SAAS,CAACN,IAAI;MAC7B,CAAC,CAAC;MACFO,OAAO,CAACC,GAAG,CAACC,SAAS,CAAC;IAC1B;IAEA,OAAOb,YAAY;EAC3B;AACJ;AAEAc,MAAM,CAACC,OAAO,GAAG,IAAIxB,MAAM,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}