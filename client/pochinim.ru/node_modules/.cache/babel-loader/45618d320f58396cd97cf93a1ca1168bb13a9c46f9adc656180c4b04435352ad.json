{"ast":null,"code":"import{makeAutoObservable}from\"mobx\";import fetchServices from\"../services/fetch-services\";class MasterController{constructor(){makeAutoObservable(this);}async checkMasterInBd(email){return false;}async registrate(fio,occupation,workingFrom,location,selectedOptionsLocation,email,photo,password,city){var selectedOptionsLocationStr=[];for(const obj of selectedOptionsLocation){selectedOptionsLocationStr.push(obj.label);}/*const id_master = await masterServices.registrate(fio, occupation, workingFrom, location, \r\n            JSON.stringify(selectedOptionsLocationStr).replace('[', '').replace(']', ''), \r\n            email, password, city);*/const body={\"fio\":fio,\"occupation\":occupation,\"workingFrom\":workingFrom,\"location\":location,\"selectedOptionsLocation\":JSON.stringify(selectedOptionsLocationStr).replace('[','').replace(']',''),\"email\":email,\"password\":password,\"city\":city};const id_master=(await fetchServices.fetchPOSTWithCredentials('/master',JSON.stringify(body))).id_master;const file=new FormData();file.append('masterPhoto',photo);const ret=await fetchServices.fetchPUT(\"/masters/\".concat(id_master),file);//const ret = await masterServices.setMasterPhoto(id_master, photo);\nif(id_master!==null&&id_master!==void 0&&id_master.message||ret!==null&&ret!==void 0&&ret.message){return false;}return true;}async getReviewsById(id){}async getWholeInfById(id){//const master = await masterServices.getMasterInfo(id);\nconst master=await fetchServices.fetchGET(\"/masters/\".concat(id));return master;}async getListOfMasters(from,to){//const masters = await masterServices.getListOfMasters(from, to);\nconst masters=await fetchServices.fetchGET(\"/masters/\".concat(from,\"/\").concat(to));var fin=[];masters===null||masters===void 0?void 0:masters.map(obj=>{fin.push({'id':obj.id,'fio':obj.fio,'photo_path':obj.photo_path,'stars':obj.stars,'reviewsCount':obj.reviewsCount,'aboutMe':obj.aboutMe,'experience':obj.experience,'education':obj.education,'sercicesAndPrice':obj.sercicesAndPrice,'reviews':obj.reviews});});return fin;}async getMasterPhotoByPath(path){//const photo = await imageServices.getImageByPath(path);\nconst photo=await fetchServices.fetchGETBlob(\"/photos/\".concat(path));const obj=URL.createObjectURL(photo);return obj;}};const masterController=new MasterController();export default masterController;","map":{"version":3,"names":["makeAutoObservable","fetchServices","MasterController","constructor","checkMasterInBd","email","registrate","fio","occupation","workingFrom","location","selectedOptionsLocation","photo","password","city","selectedOptionsLocationStr","obj","push","label","body","JSON","stringify","replace","id_master","fetchPOSTWithCredentials","file","FormData","append","ret","fetchPUT","concat","message","getReviewsById","id","getWholeInfById","master","fetchGET","getListOfMasters","from","to","masters","fin","map","photo_path","stars","reviewsCount","aboutMe","experience","education","sercicesAndPrice","reviews","getMasterPhotoByPath","path","fetchGETBlob","URL","createObjectURL","masterController"],"sources":["C:/Users/denis/VSCode_projects/Pochinim.ru/client/pochinim.ru/src/controllers/MASTER-controller.js"],"sourcesContent":["import {makeAutoObservable} from \"mobx\"\r\nimport fetchServices from \"../services/fetch-services\";\r\n\r\nclass MasterController{\r\n    constructor(){\r\n        makeAutoObservable(this);\r\n    }\r\n\r\n    async checkMasterInBd(email){\r\n        return false;\r\n    }\r\n\r\n    async registrate(fio, occupation, workingFrom, location, selectedOptionsLocation, \r\n                        email, photo, password, city){\r\n\r\n        var selectedOptionsLocationStr = [];\r\n\r\n        for (const obj of selectedOptionsLocation){\r\n            selectedOptionsLocationStr.push(obj.label)\r\n        }\r\n        \r\n        /*const id_master = await masterServices.registrate(fio, occupation, workingFrom, location, \r\n            JSON.stringify(selectedOptionsLocationStr).replace('[', '').replace(']', ''), \r\n            email, password, city);*/\r\n\r\n        const body = {\"fio\": fio, \"occupation\": occupation, \"workingFrom\": workingFrom, \"location\": location,\r\n                        \"selectedOptionsLocation\": JSON.stringify(selectedOptionsLocationStr).replace('[', '').replace(']', ''),\r\n                            \"email\": email, \"password\": password, \"city\": city};\r\n\r\n        const id_master = (await fetchServices.fetchPOSTWithCredentials('/master', JSON.stringify(body))).id_master;\r\n        \r\n        const file = new FormData();\r\n        file.append('masterPhoto', photo);\r\n\r\n        const ret = await fetchServices.fetchPUT(`/masters/${id_master}`, file)\r\n\r\n        //const ret = await masterServices.setMasterPhoto(id_master, photo);\r\n        \r\n        if(id_master?.message || ret?.message){\r\n            return false;\r\n        }  \r\n        return true;\r\n    }\r\n\r\n    async getReviewsById(id){\r\n        \r\n    }\r\n\r\n    async getWholeInfById(id){\r\n\r\n        //const master = await masterServices.getMasterInfo(id);\r\n        const master = await fetchServices.fetchGET(`/masters/${id}`);\r\n        \r\n        return master;\r\n    }\r\n\r\n    async getListOfMasters(from, to){\r\n        //const masters = await masterServices.getListOfMasters(from, to);\r\n        const masters = await fetchServices.fetchGET(`/masters/${from}/${to}`);\r\n\r\n        var fin = [];\r\n\r\n        masters?.map(obj => {\r\n            fin.push({\r\n                'id': obj.id,\r\n                'fio': obj.fio,\r\n                'photo_path': obj.photo_path,\r\n                'stars': obj.stars,\r\n                'reviewsCount': obj.reviewsCount,\r\n                'aboutMe': obj.aboutMe,\r\n                'experience': obj.experience,\r\n                'education': obj.education,\r\n                'sercicesAndPrice': obj.sercicesAndPrice,\r\n                'reviews': obj.reviews,\r\n            })\r\n        })\r\n\r\n        return fin;\r\n    }\r\n\r\n    async getMasterPhotoByPath(path){\r\n        //const photo = await imageServices.getImageByPath(path);\r\n        const photo = await fetchServices.fetchGETBlob(`/photos/${path}`);\r\n\r\n        const obj = URL.createObjectURL(photo);\r\n\r\n        return obj;\r\n    }\r\n};\r\n\r\nconst masterController = new MasterController();\r\n\r\nexport default masterController;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}