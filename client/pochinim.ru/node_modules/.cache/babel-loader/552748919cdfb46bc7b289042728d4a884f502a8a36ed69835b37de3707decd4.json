{"ast":null,"code":"import _classPrivateFieldLooseBase from \"C:/Users/denis/VSCode_projects/Pochinim.ru/client/pochinim.ru/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js\";\nimport _classPrivateFieldLooseKey from \"C:/Users/denis/VSCode_projects/Pochinim.ru/client/pochinim.ru/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js\";\nimport chatController from \"../controllers/Chat-controller\";\nvar _id_companion = /*#__PURE__*/_classPrivateFieldLooseKey(\"id_companion\");\nvar _id_chat = /*#__PURE__*/_classPrivateFieldLooseKey(\"id_chat\");\nvar _chats = /*#__PURE__*/_classPrivateFieldLooseKey(\"chats\");\nvar _messages = /*#__PURE__*/_classPrivateFieldLooseKey(\"messages\");\nclass Chat {\n  constructor() {\n    Object.defineProperty(this, _id_companion, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _id_chat, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _chats, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _messages, {\n      writable: true,\n      value: void 0\n    });\n    _classPrivateFieldLooseBase(this, _id_companion)[_id_companion] = null;\n    _classPrivateFieldLooseBase(this, _chats)[_chats] = [];\n    _classPrivateFieldLooseBase(this, _id_chat)[_id_chat] = null;\n    _classPrivateFieldLooseBase(this, _messages)[_messages] = [];\n  }\n  async downloadChatsOfTopic(id_topic) {\n    _classPrivateFieldLooseBase(this, _chats)[_chats] = await chatController.getChatsUserByIdTopic(id_topic);\n  }\n  async downloadMessagesOfChat() {\n    //this.#messages = await chatController.getMessagesUser(id_topic, this.#id_companion);\n    if (_classPrivateFieldLooseBase(this, _id_chat)[_id_chat] != null) _classPrivateFieldLooseBase(this, _messages)[_messages] = await chatController.getMessages(_classPrivateFieldLooseBase(this, _id_chat)[_id_chat]);\n  }\n  async sendMessage(text, id_topic) {\n    if (text != '' && _classPrivateFieldLooseBase(this, _id_chat)[_id_chat] != null) {\n      await chatController.sendMessageUser(text, _classPrivateFieldLooseBase(this, _id_companion)[_id_companion], id_topic);\n    }\n  }\n  get idCompanion() {\n    return _classPrivateFieldLooseBase(this, _id_companion)[_id_companion];\n  }\n  set idCompanion(new_id_companion) {\n    if (new_id_companion != null) {\n      _classPrivateFieldLooseBase(this, _id_companion)[_id_companion] = new_id_companion;\n    }\n  }\n  get chats() {\n    return _classPrivateFieldLooseBase(this, _chats)[_chats];\n  }\n  get idChat() {\n    return _classPrivateFieldLooseBase(this, _id_chat)[_id_chat];\n  }\n  set idChat(new_id_chat) {\n    console.log(new_id_chat);\n    if (new_id_chat != null) {\n      _classPrivateFieldLooseBase(this, _id_chat)[_id_chat] = new_id_chat;\n    }\n  }\n  get messages() {\n    return _classPrivateFieldLooseBase(this, _messages)[_messages];\n  }\n}\nconst chat = new Chat();\nexport default chat;","map":{"version":3,"names":["chatController","_id_companion","_classPrivateFieldLooseKey","_id_chat","_chats","_messages","Chat","constructor","Object","defineProperty","writable","value","_classPrivateFieldLooseBase","downloadChatsOfTopic","id_topic","getChatsUserByIdTopic","downloadMessagesOfChat","getMessages","sendMessage","text","sendMessageUser","idCompanion","new_id_companion","chats","idChat","new_id_chat","console","log","messages","chat"],"sources":["C:/Users/denis/VSCode_projects/Pochinim.ru/client/pochinim.ru/src/Classes/Chats-class.js"],"sourcesContent":["import chatController from \"../controllers/Chat-controller\";\r\n\r\nclass Chat{\r\n    #id_companion\r\n    #id_chat\r\n    #chats\r\n    #messages\r\n    constructor(){\r\n        this.#id_companion = null;\r\n        this.#chats = [];\r\n        this.#id_chat = null;\r\n        this.#messages = [];\r\n    }\r\n\r\n    async downloadChatsOfTopic(id_topic){\r\n        this.#chats = await chatController.getChatsUserByIdTopic(id_topic);\r\n    }\r\n\r\n    async downloadMessagesOfChat(){\r\n        //this.#messages = await chatController.getMessagesUser(id_topic, this.#id_companion);\r\n        if(this.#id_chat != null)\r\n            this.#messages = await chatController.getMessages(this.#id_chat);\r\n    }\r\n\r\n    async sendMessage(text, id_topic){\r\n        if(text != '' && this.#id_chat != null){\r\n            await chatController.sendMessageUser(text, this.#id_companion, id_topic);\r\n        }\r\n    } \r\n\r\n    get idCompanion(){\r\n        return this.#id_companion;\r\n    }\r\n    set idCompanion(new_id_companion){\r\n        if(new_id_companion != null){\r\n            this.#id_companion = new_id_companion;\r\n        }\r\n    }\r\n    get chats(){\r\n        return this.#chats;\r\n    }\r\n    get idChat(){\r\n        return this.#id_chat;\r\n    }\r\n    set idChat(new_id_chat){\r\n        console.log(new_id_chat);\r\n        if(new_id_chat != null){\r\n            this.#id_chat = new_id_chat;\r\n        }\r\n    }\r\n    get messages(){\r\n        return this.#messages;\r\n    }\r\n}\r\n\r\nconst chat = new Chat();\r\n\r\nexport default chat;"],"mappings":";;AAAA,OAAOA,cAAc,MAAM,gCAAgC;AAAC,IAAAC,aAAA,gBAAAC,0BAAA;AAAA,IAAAC,QAAA,gBAAAD,0BAAA;AAAA,IAAAE,MAAA,gBAAAF,0BAAA;AAAA,IAAAG,SAAA,gBAAAH,0BAAA;AAE5D,MAAMI,IAAI;EAKNC,WAAWA,CAAA,EAAE;IAAAC,MAAA,CAAAC,cAAA,OAAAR,aAAA;MAAAS,QAAA;MAAAC,KAAA;IAAA;IAAAH,MAAA,CAAAC,cAAA,OAAAN,QAAA;MAAAO,QAAA;MAAAC,KAAA;IAAA;IAAAH,MAAA,CAAAC,cAAA,OAAAL,MAAA;MAAAM,QAAA;MAAAC,KAAA;IAAA;IAAAH,MAAA,CAAAC,cAAA,OAAAJ,SAAA;MAAAK,QAAA;MAAAC,KAAA;IAAA;IACTC,2BAAA,KAAI,EAAAX,aAAA,EAAAA,aAAA,IAAiB,IAAI;IACzBW,2BAAA,KAAI,EAAAR,MAAA,EAAAA,MAAA,IAAU,EAAE;IAChBQ,2BAAA,KAAI,EAAAT,QAAA,EAAAA,QAAA,IAAY,IAAI;IACpBS,2BAAA,KAAI,EAAAP,SAAA,EAAAA,SAAA,IAAa,EAAE;EACvB;EAEA,MAAMQ,oBAAoBA,CAACC,QAAQ,EAAC;IAChCF,2BAAA,KAAI,EAAAR,MAAA,EAAAA,MAAA,IAAU,MAAMJ,cAAc,CAACe,qBAAqB,CAACD,QAAQ,CAAC;EACtE;EAEA,MAAME,sBAAsBA,CAAA,EAAE;IAC1B;IACA,IAAGJ,2BAAA,KAAI,EAAAT,QAAA,EAAAA,QAAA,KAAa,IAAI,EACpBS,2BAAA,KAAI,EAAAP,SAAA,EAAAA,SAAA,IAAa,MAAML,cAAc,CAACiB,WAAW,CAAAL,2BAAA,CAAC,IAAI,EAAAT,QAAA,EAAAA,QAAA,CAAS,CAAC;EACxE;EAEA,MAAMe,WAAWA,CAACC,IAAI,EAAEL,QAAQ,EAAC;IAC7B,IAAGK,IAAI,IAAI,EAAE,IAAIP,2BAAA,KAAI,EAAAT,QAAA,EAAAA,QAAA,KAAa,IAAI,EAAC;MACnC,MAAMH,cAAc,CAACoB,eAAe,CAACD,IAAI,EAAAP,2BAAA,CAAE,IAAI,EAAAX,aAAA,EAAAA,aAAA,GAAgBa,QAAQ,CAAC;IAC5E;EACJ;EAEA,IAAIO,WAAWA,CAAA,EAAE;IACb,OAAAT,2BAAA,CAAO,IAAI,EAAAX,aAAA,EAAAA,aAAA;EACf;EACA,IAAIoB,WAAWA,CAACC,gBAAgB,EAAC;IAC7B,IAAGA,gBAAgB,IAAI,IAAI,EAAC;MACxBV,2BAAA,KAAI,EAAAX,aAAA,EAAAA,aAAA,IAAiBqB,gBAAgB;IACzC;EACJ;EACA,IAAIC,KAAKA,CAAA,EAAE;IACP,OAAAX,2BAAA,CAAO,IAAI,EAAAR,MAAA,EAAAA,MAAA;EACf;EACA,IAAIoB,MAAMA,CAAA,EAAE;IACR,OAAAZ,2BAAA,CAAO,IAAI,EAAAT,QAAA,EAAAA,QAAA;EACf;EACA,IAAIqB,MAAMA,CAACC,WAAW,EAAC;IACnBC,OAAO,CAACC,GAAG,CAACF,WAAW,CAAC;IACxB,IAAGA,WAAW,IAAI,IAAI,EAAC;MACnBb,2BAAA,KAAI,EAAAT,QAAA,EAAAA,QAAA,IAAYsB,WAAW;IAC/B;EACJ;EACA,IAAIG,QAAQA,CAAA,EAAE;IACV,OAAAhB,2BAAA,CAAO,IAAI,EAAAP,SAAA,EAAAA,SAAA;EACf;AACJ;AAEA,MAAMwB,IAAI,GAAG,IAAIvB,IAAI,CAAC,CAAC;AAEvB,eAAeuB,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}