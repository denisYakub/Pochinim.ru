{"ast":null,"code":"import _classPrivateFieldLooseBase from\"C:/Users/denis/VSCode_projects/Pochinim.ru/client/pochinim.ru/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js\";import _classPrivateFieldLooseKey from\"C:/Users/denis/VSCode_projects/Pochinim.ru/client/pochinim.ru/node_modules/@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js\";import chatController from\"../controllers/Chat-controller\";var _id_companion=/*#__PURE__*/_classPrivateFieldLooseKey(\"id_companion\");var _id_chat=/*#__PURE__*/_classPrivateFieldLooseKey(\"id_chat\");var _chats=/*#__PURE__*/_classPrivateFieldLooseKey(\"chats\");var _messages=/*#__PURE__*/_classPrivateFieldLooseKey(\"messages\");var _id_topic=/*#__PURE__*/_classPrivateFieldLooseKey(\"id_topic\");class Chat{constructor(){Object.defineProperty(this,_id_companion,{writable:true,value:void 0});Object.defineProperty(this,_id_chat,{writable:true,value:void 0});Object.defineProperty(this,_chats,{writable:true,value:void 0});Object.defineProperty(this,_messages,{writable:true,value:void 0});Object.defineProperty(this,_id_topic,{writable:true,value:void 0});_classPrivateFieldLooseBase(this,_id_companion)[_id_companion]=null;_classPrivateFieldLooseBase(this,_chats)[_chats]=[];_classPrivateFieldLooseBase(this,_id_chat)[_id_chat]=null;_classPrivateFieldLooseBase(this,_messages)[_messages]=[];_classPrivateFieldLooseBase(this,_id_topic)[_id_topic]=null;}async setChatIDByIdTopic(id_topic){if(id_topic!=null&&_classPrivateFieldLooseBase(this,_id_companion)[_id_companion]!=null){_classPrivateFieldLooseBase(this,_id_chat)[_id_chat]=await chatController.getChatID(localStorage.getItem('mail'),_classPrivateFieldLooseBase(this,_id_companion)[_id_companion],id_topic);}}async downloadChatsOfTopic(id_topic){_classPrivateFieldLooseBase(this,_chats)[_chats]=await chatController.getChatsUserByIdTopic(id_topic);}async downloadMessagesOfChat(){if(_classPrivateFieldLooseBase(this,_id_chat)[_id_chat]!=null)_classPrivateFieldLooseBase(this,_messages)[_messages]=await chatController.getMessages(_classPrivateFieldLooseBase(this,_id_chat)[_id_chat]);}async sendMessage(text){if(text!=''&&_classPrivateFieldLooseBase(this,_id_chat)[_id_chat]!=null){await chatController.sendMessage(text,_classPrivateFieldLooseBase(this,_id_chat)[_id_chat]);}}get idCompanion(){return _classPrivateFieldLooseBase(this,_id_companion)[_id_companion];}set idCompanion(new_id_companion){if(new_id_companion!=null){_classPrivateFieldLooseBase(this,_id_companion)[_id_companion]=new_id_companion;}}get chats(){return _classPrivateFieldLooseBase(this,_chats)[_chats];}get idChat(){return _classPrivateFieldLooseBase(this,_id_chat)[_id_chat];}set idChat(new_id_chat){if(new_id_chat!=null){_classPrivateFieldLooseBase(this,_id_chat)[_id_chat]=new_id_chat;}}get messages(){return _classPrivateFieldLooseBase(this,_messages)[_messages];}get idTopic(){return _classPrivateFieldLooseBase(this,_id_topic)[_id_topic];}set idTopic(new_id_topic){if(new_id_topic!=null){_classPrivateFieldLooseBase(this,_id_topic)[_id_topic]=new_id_topic;}}}const chat=new Chat();export default chat;","map":{"version":3,"names":["chatController","_id_companion","_classPrivateFieldLooseKey","_id_chat","_chats","_messages","_id_topic","Chat","constructor","Object","defineProperty","writable","value","_classPrivateFieldLooseBase","setChatIDByIdTopic","id_topic","getChatID","localStorage","getItem","downloadChatsOfTopic","getChatsUserByIdTopic","downloadMessagesOfChat","getMessages","sendMessage","text","idCompanion","new_id_companion","chats","idChat","new_id_chat","messages","idTopic","new_id_topic","chat"],"sources":["C:/Users/denis/VSCode_projects/Pochinim.ru/client/pochinim.ru/src/Classes/Chats-class.js"],"sourcesContent":["import chatController from \"../controllers/Chat-controller\";\r\n\r\nclass Chat{\r\n    #id_companion\r\n    #id_chat\r\n    #chats\r\n    #messages\r\n    #id_topic\r\n    constructor(){\r\n        this.#id_companion = null;\r\n        this.#chats = [];\r\n        this.#id_chat = null;\r\n        this.#messages = [];\r\n        this.#id_topic = null;\r\n    }\r\n\r\n    async setChatIDByIdTopic(id_topic){\r\n        if( id_topic != null && this.#id_companion != null){\r\n            this.#id_chat = await chatController.getChatID(localStorage.getItem('mail'), this.#id_companion, id_topic);\r\n        }\r\n    }\r\n\r\n    async downloadChatsOfTopic(id_topic){\r\n        this.#chats = await chatController.getChatsUserByIdTopic(id_topic);\r\n    }\r\n\r\n    async downloadMessagesOfChat(){\r\n        if(this.#id_chat != null)\r\n            this.#messages = await chatController.getMessages(this.#id_chat);\r\n    }\r\n\r\n    async sendMessage(text){\r\n        if(text != '' && this.#id_chat != null){\r\n            await chatController.sendMessage(text, this.#id_chat);\r\n        }\r\n    } \r\n\r\n    get idCompanion(){\r\n        return this.#id_companion;\r\n    }\r\n    set idCompanion(new_id_companion){\r\n        if(new_id_companion != null){\r\n            this.#id_companion = new_id_companion;\r\n        }\r\n    }\r\n    get chats(){\r\n        return this.#chats;\r\n    }\r\n    get idChat(){\r\n        return this.#id_chat;\r\n    }\r\n    set idChat(new_id_chat){\r\n        if(new_id_chat != null){\r\n            this.#id_chat = new_id_chat;\r\n        }\r\n    }\r\n    get messages(){\r\n        return this.#messages;\r\n    }\r\n    get idTopic(){\r\n        return this.#id_topic;\r\n    }\r\n    set idTopic(new_id_topic){\r\n        if(new_id_topic != null){\r\n            this.#id_topic = new_id_topic;\r\n        }\r\n    }\r\n}\r\n\r\nconst chat = new Chat();\r\n\r\nexport default chat;"],"mappings":"wVAAA,MAAO,CAAAA,cAAc,KAAM,gCAAgC,CAAC,IAAAC,aAAA,cAAAC,0BAAA,qBAAAC,QAAA,cAAAD,0BAAA,gBAAAE,MAAA,cAAAF,0BAAA,cAAAG,SAAA,cAAAH,0BAAA,iBAAAI,SAAA,cAAAJ,0BAAA,aAE5D,KAAM,CAAAK,IAAI,CAMNC,WAAWA,CAAA,CAAE,CAAAC,MAAA,CAAAC,cAAA,MAAAT,aAAA,EAAAU,QAAA,MAAAC,KAAA,UAAAH,MAAA,CAAAC,cAAA,MAAAP,QAAA,EAAAQ,QAAA,MAAAC,KAAA,UAAAH,MAAA,CAAAC,cAAA,MAAAN,MAAA,EAAAO,QAAA,MAAAC,KAAA,UAAAH,MAAA,CAAAC,cAAA,MAAAL,SAAA,EAAAM,QAAA,MAAAC,KAAA,UAAAH,MAAA,CAAAC,cAAA,MAAAJ,SAAA,EAAAK,QAAA,MAAAC,KAAA,UACTC,2BAAA,KAAI,CAAAZ,aAAA,EAAAA,aAAA,EAAiB,IAAI,CACzBY,2BAAA,KAAI,CAAAT,MAAA,EAAAA,MAAA,EAAU,EAAE,CAChBS,2BAAA,KAAI,CAAAV,QAAA,EAAAA,QAAA,EAAY,IAAI,CACpBU,2BAAA,KAAI,CAAAR,SAAA,EAAAA,SAAA,EAAa,EAAE,CACnBQ,2BAAA,KAAI,CAAAP,SAAA,EAAAA,SAAA,EAAa,IAAI,CACzB,CAEA,KAAM,CAAAQ,kBAAkBA,CAACC,QAAQ,CAAC,CAC9B,GAAIA,QAAQ,EAAI,IAAI,EAAIF,2BAAA,KAAI,CAAAZ,aAAA,EAAAA,aAAA,GAAkB,IAAI,CAAC,CAC/CY,2BAAA,KAAI,CAAAV,QAAA,EAAAA,QAAA,EAAY,KAAM,CAAAH,cAAc,CAACgB,SAAS,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAAL,2BAAA,CAAE,IAAI,CAAAZ,aAAA,EAAAA,aAAA,EAAgBc,QAAQ,CAAC,CAC9G,CACJ,CAEA,KAAM,CAAAI,oBAAoBA,CAACJ,QAAQ,CAAC,CAChCF,2BAAA,KAAI,CAAAT,MAAA,EAAAA,MAAA,EAAU,KAAM,CAAAJ,cAAc,CAACoB,qBAAqB,CAACL,QAAQ,CAAC,CACtE,CAEA,KAAM,CAAAM,sBAAsBA,CAAA,CAAE,CAC1B,GAAGR,2BAAA,KAAI,CAAAV,QAAA,EAAAA,QAAA,GAAa,IAAI,CACpBU,2BAAA,KAAI,CAAAR,SAAA,EAAAA,SAAA,EAAa,KAAM,CAAAL,cAAc,CAACsB,WAAW,CAAAT,2BAAA,CAAC,IAAI,CAAAV,QAAA,EAAAA,QAAA,CAAS,CAAC,CACxE,CAEA,KAAM,CAAAoB,WAAWA,CAACC,IAAI,CAAC,CACnB,GAAGA,IAAI,EAAI,EAAE,EAAIX,2BAAA,KAAI,CAAAV,QAAA,EAAAA,QAAA,GAAa,IAAI,CAAC,CACnC,KAAM,CAAAH,cAAc,CAACuB,WAAW,CAACC,IAAI,CAAAX,2BAAA,CAAE,IAAI,CAAAV,QAAA,EAAAA,QAAA,CAAS,CAAC,CACzD,CACJ,CAEA,GAAI,CAAAsB,WAAWA,CAAA,CAAE,CACb,OAAAZ,2BAAA,CAAO,IAAI,CAAAZ,aAAA,EAAAA,aAAA,EACf,CACA,GAAI,CAAAwB,WAAWA,CAACC,gBAAgB,CAAC,CAC7B,GAAGA,gBAAgB,EAAI,IAAI,CAAC,CACxBb,2BAAA,KAAI,CAAAZ,aAAA,EAAAA,aAAA,EAAiByB,gBAAgB,CACzC,CACJ,CACA,GAAI,CAAAC,KAAKA,CAAA,CAAE,CACP,OAAAd,2BAAA,CAAO,IAAI,CAAAT,MAAA,EAAAA,MAAA,EACf,CACA,GAAI,CAAAwB,MAAMA,CAAA,CAAE,CACR,OAAAf,2BAAA,CAAO,IAAI,CAAAV,QAAA,EAAAA,QAAA,EACf,CACA,GAAI,CAAAyB,MAAMA,CAACC,WAAW,CAAC,CACnB,GAAGA,WAAW,EAAI,IAAI,CAAC,CACnBhB,2BAAA,KAAI,CAAAV,QAAA,EAAAA,QAAA,EAAY0B,WAAW,CAC/B,CACJ,CACA,GAAI,CAAAC,QAAQA,CAAA,CAAE,CACV,OAAAjB,2BAAA,CAAO,IAAI,CAAAR,SAAA,EAAAA,SAAA,EACf,CACA,GAAI,CAAA0B,OAAOA,CAAA,CAAE,CACT,OAAAlB,2BAAA,CAAO,IAAI,CAAAP,SAAA,EAAAA,SAAA,EACf,CACA,GAAI,CAAAyB,OAAOA,CAACC,YAAY,CAAC,CACrB,GAAGA,YAAY,EAAI,IAAI,CAAC,CACpBnB,2BAAA,KAAI,CAAAP,SAAA,EAAAA,SAAA,EAAa0B,YAAY,CACjC,CACJ,CACJ,CAEA,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAA1B,IAAI,CAAC,CAAC,CAEvB,cAAe,CAAA0B,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}